        `Flask Blog & Wallet System`

Повнофункціональний веб-додаток для блогу з інтегрованою фінансовою системою. Проєкт реалізує розширену роботу з базами даних PostgreSQL, включаючи транзакції, тригери, збережені функції та механізми відновлення даних.

        **Основний Функціонал**

Керування контентом (CRUD + Restore)

Створення постів: Зручна форма для додавання нових публікацій.

Архівація (Soft Delete): Пости не видаляються безслідно, а переміщуються в архів (deleted_posts) за допомогою атомарної транзакції.

Відновлення даних: Можливість повернути пост з архіву на сайт разом із усіма накопиченими донатами.

        **Фінансова Система**

Гаманець користувача: Симуляція балансу, з якого списуються кошти.

Донати: Підтримка авторів постів. Транзакція гарантує, що гроші спишуться з гаманця лише в тому випадку, якщо вони успішно зарахуються на пост.

Скидання балансу: Можливість швидко відновити початковий баланс ($1000) для тестування.

        **Безпека та Аудит**

Захист дій: Критичні операції (архівація та відновлення) захищені паролем адміністратора.

Аудит (Audit Log):

Використання SQL Trigger (log_new_post) для автоматичного запису створення постів.

Логування всіх фінансових операцій та дій з відновлення даних.

        **Архітектура Бази Даних**

Проєкт використовує реляційну базу даних **PostgreSQL**.

| Таблиця | Опис |
| :--- | :--- |
| `posts` | Основна таблиця публікацій. |
| `wallet` | Зберігає баланс користувача (id=1). |
| `audit_log` | Журнал подій (заповнюється тригерами та транзакціями). |
| `deleted_posts` | "Смітник" для архівованих постів (для Soft Delete). |

        **SQL Особливості:**
* Використання `SERIAL` для первинних ключів.
* `CASCADE` видалення.
* PL/pgSQL функції для тригерів.

    **Встановлення та Запуск**

1. **Вимоги**

Python 3.x

PostgreSQL Server

pgAdmin 4 (для керування БД)

2. **Підготовка Бази Даних**

Відкрийте pgAdmin.

Створіть нову базу даних з назвою flask_blog.

Переконайтеся, що пам'ятаєте пароль від користувача postgres.

3. **Налаштування Проєкту**

Клонуйте репозиторій або завантажте файли, потім відкрийте термінал:

**Створення віртуального середовища**
python -m venv venv

**Активація**

Windows:
.\venv\scripts\activate

macOS/Linux:
source venv/bin/activate

**Встановлення бібліотек**

pip install -r requirements.txt


4. **Конфігурація**

Відкрийте файл main.py і знайдіть блок конфігурації. Впишіть свій пароль від PostgreSQL:

app.config.from_mapping(
    # ...
    DB_HOST='localhost',
    DB_NAME='flask_blog',
    DB_USER='postgres',
    DB_PASSWORD='ВАШ_ПАРОЛЬ_ТУТ'  # <--- Змінити це
)


**5. Ініціалізація та Запуск**

Створення таблиць та початкових даних
python main.py initdb

Запуск сервера
python main.py


Перейдіть за адресою: http://127.0.0.1:5000/

        **Адміністрування**

Для виконання дій "Archive" та "Restore" система запитає пароль.
Пароль за замовчуванням: admin

(Ви можете змінити його у змінній ADMIN_PASSWORD у файлі main.py)

        **Автор**

Денис Руденок

Група: ІСД-31

Курс: ОБЗД